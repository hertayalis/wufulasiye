<!doctype html><html lang=en><head><meta charset=utf-8><meta name=HandheldFriendly content="True"><meta name=MobileOptimized content="320"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=referrer content="no-referrer"><meta name=description content="I have an Angular 2 Frontend to be tested, I found on a Site ( https://kendaleiv.com/angular-2-component-testing-template-using-testbed/ ) a guy using ng-test (angular core testing) TestBed, this is a really basic example it does not explain how to do operations with the Elements."><meta name=robots content="index,follow,noarchive"><link href="https://fonts.googleapis.com/css?family=Open+Sans:400|Old+Standard+TT:400&display=swap" rel=stylesheet media=print type=text/css onload='this.media="all"'><title>Angular 2 App Testing, how to access and operate on html elements?</title><link rel=canonical href=./angular-2-app-testing-how-to-access-and-operate-on-html-elements.html><style>*{border:0;font:inherit;font-size:100%;vertical-align:baseline;margin:0;padding:0;color:#000;text-decoration-skip:ink}body{font-family:open sans,myriad pro,Myriad,sans-serif;font-size:17px;line-height:160%;color:#1d1313;max-width:700px;margin:auto}p{margin:20px 0}a img{border:none}img{margin:10px auto;max-width:100%;display:block}.left-justify{float:left}.right-justify{float:right}pre,code{font:12px Consolas,liberation mono,Menlo,Courier,monospace;background-color:#f7f7f7}code{font-size:12px;padding:4px}pre{margin-top:0;margin-bottom:16px;word-wrap:normal;padding:16px;overflow:auto;font-size:85%;line-height:1.45}pre>code{padding:0;margin:0;font-size:100%;word-break:normal;white-space:pre;background:0 0;border:0}pre code{display:inline;padding:0;margin:0;overflow:visible;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}pre code::before,pre code::after{content:normal}em,q,em,dfn{font-style:italic}.sans,html .gist .gist-file .gist-meta{font-family:open sans,myriad pro,Myriad,sans-serif}.mono,pre,code,tt,p code,li code{font-family:Menlo,Monaco,andale mono,lucida console,courier new,monospace}.heading,.serif,h1,h2,h3{font-family:old standard tt,serif}strong{font-weight:600}q:before{content:"\201C"}q:after{content:"\201D"}del,s{text-decoration:line-through}blockquote{font-family:old standard tt,serif;text-align:center;padding:50px}blockquote p{display:inline-block;font-style:italic}blockquote:before,blockquote:after{font-family:old standard tt,serif;content:'\201C';font-size:35px;color:#403c3b}blockquote:after{content:'\201D'}hr{width:40%;height:1px;background:#403c3b;margin:25px auto}h1{font-size:35px}h2{font-size:28px}h3{font-size:22px;margin-top:18px}h1 a,h2 a,h3 a{text-decoration:none}h1,h2{margin-top:28px}#sub-header,.date{color:#403c3b;font-size:13px}#sub-header{margin:0 4px}#nav h1 a{font-size:35px;color:#1d1313;line-height:120%}.posts_listing a,#nav a{text-decoration:none}li{margin-left:20px}ul li{margin-left:5px}ul li{list-style-type:none}ul li:before{content:"\00BB \0020"}#nav ul li:before,.posts_listing li:before{content:'';margin-right:0}#content{text-align:left;width:100%;font-size:15px;padding:60px 0 80px}#content h1,#content h2{margin-bottom:5px}#content h2{font-size:25px}#content .entry-content{margin-top:15px}#content .date{margin-left:3px}#content h1{font-size:30px}.highlight{margin:10px 0}.posts_listing{margin:0 0 50px}.posts_listing li{margin:0 0 25px 15px}.posts_listing li a:hover,#nav a:hover{text-decoration:underline}#nav{text-align:center;position:static;margin-top:60px}#nav ul{display:table;margin:8px auto 0}#nav li{list-style-type:none;display:table-cell;font-size:15px;padding:0 20px}#links{display:flex;justify-content:space-between;margin:50px 0 0}#links :nth-child(1){margin-right:.5em}#links :nth-child(2){margin-left:.5em}#not-found{text-align:center}#not-found a{font-family:old standard tt,serif;font-size:200px;text-decoration:none;display:inline-block;padding-top:225px}@media(max-width:750px){body{padding-left:20px;padding-right:20px}#nav h1 a{font-size:28px}#nav li{font-size:13px;padding:0 15px}#content{margin-top:0;padding-top:50px;font-size:14px}#content h1{font-size:25px}#content h2{font-size:22px}.posts_listing li div{font-size:12px}}@media(max-width:400px){body{padding-left:20px;padding-right:20px}#nav h1 a{font-size:22px}#nav li{font-size:12px;padding:0 10px}#content{margin-top:0;padding-top:20px;font-size:12px}#content h1{font-size:20px}#content h2{font-size:18px}.posts_listing li div{font-size:12px}}@media(prefers-color-scheme:dark){*,#nav h1 a{color:#fdfdfd}body{background:#121212}pre,code{background-color:#262626}#sub-header,.date{color:#bababa}hr{background:#ebebeb}}</style></head><body><section id=nav><h1><a href=./index.html>JazzVibe</a></h1><ul><li><a href=./index.xml>Rss</a></li><li><a href=./sitemap.xml>Sitemap</a></li></ul></section><section id=content><h1>Angular 2 App Testing, how to access and operate on html elements?</h1><div id=sub-header>June 2024 · 2 minute read</div><div class=entry-content><img src=https://cdn.statically.io/img/cdn.sstatic.net/Sites/stackoverflow/Img/apple-touch-icon@2.png style=margin:auto;display:block;text-align:center;max-width:100%;height:auto><p>I have an Angular 2 Frontend to be tested, I found on a Site ( <a href=# rel="nofollow noreferrer">https://kendaleiv.com/angular-2-component-testing-template-using-testbed/</a> ) a guy using ng-test (angular core testing) TestBed, this is a really basic example it does not explain how to do operations with the Elements.</p><p>My App has an Input Form element, once the input signal has been sent through the Form Element it show a results set on an InfoBox element. So what I would like to do is to retrieve the element Form from the TestBed provide a String to search with it and get the response from the Input box. (Test 3)</p><p>1) How do I retrieve the elements (form and InfoBox)?</p><p>2) How do I get the signal to be processed from the InfoBox?</p><p>3) How can I retrieve the result set from the InfoBox Element once the signal has been processed?</p><p>Here is the code sample that I’m using, when I run it with the command ‘ng test’ it starts Chrome and the first two tests are working.</p><pre><code>describe('AppComponent', () =&gt; { beforeEach(async(() =&gt; { TestBed.configureTestingModule({ declarations: [ AgsResultsComponent, AppComponent, FormularComponent, FormularAutocompleteComponent, InfoBoxComponent, InfoBoxAgencyDetailsComponent, InfoBoxAgencyItemComponent ], providers: [ConfigurationService], schemas: [NO_ERRORS_SCHEMA] }).compileComponents(); })); // Test 1 it('should create the app', async(() =&gt; { const fixture = TestBed.createComponent(AppComponent); const app = fixture.debugElement.componentInstance; console.log(app); expect(app).toBeTruthy(); })); // Test 2 it('should render agsheading in a h1 tag', async(() =&gt; { const fixture = TestBed.createComponent(AppComponent); fixture.detectChanges(); const compiled = fixture.debugElement.nativeElement; expect(compiled.querySelector('h1').textContent).toContain('Agentursuche'); })); // Test 3 it('should execute a search using Form', async(() =&gt; { const formular = TestBed.createComponent(FormularComponent); const infoBox = TestBed.createComponent(InfoBoxComponent); formular.detectChanges(); infoBox.detectChanges(); const formularCompiled = formular.debugElement.nativeElement; const infoBoxCompiled = infoBox.debugElement.nativeElement; formularCompiled.sendInput('Just a Test'); expect(infoBoxCompiled).toContain(something); })); }); </code></pre><span class=d-none itemprop=commentCount></span><h2 class=mb0 data-answercount=1>1 Answer</h2><p>You should use another beforeEach method to create the components and store them in a local variable, so you avoid writing the same thing in each test.</p><p>In order to fetch html elements from the component one can use the query method on the debug element:</p><pre><code>const inputDebugElement = formular.debugElement.query(By.css('input')); const inputHtmlElement = inputDebugElement.nativeElement as HTMLInputElement; </code></pre><p>Once you have that, you can set values on it and dispatch events:</p><pre><code>inputHtmlElement.value = 'foo'; inputHtmlElement.dispatchEvent(new Event('input')); </code></pre><p>Remember that in order to trigger the change detection you need to call detectChanges() on the fixture and after that wait for it to be stable with whenStable() call or call tick() inside a fakeAsync test.</p><p>Would recommend to read the <a href=# rel="nofollow noreferrer">official testing guidelines</a> to get a better insight on how to test Angular applications.</p><span class=d-none itemprop=commentCount>3</span><p class=postsid style=color:rgba(255,0,0,0)>ncG1vNJzZmirpJawrLvVnqmfpJ%2Bse6S7zGiorp2jqbawutJoa25wYGeAeYOOmqWgrZyWv25%2BjJqnqWWkmsC1tc2gZKGnp2LBsHnAnJqeq6Nirq%2BwjKinnqqRqbJuu81mn62lnGKyrbHMnqWtqw%3D%3D</p></div><div id=links><a href=./beyonce-hair-transformation-twins-mother-tina-knowles.html>&#171;&nbsp;Beyonce unveils stunning hair transformation as she twins with mom Tina Knowles for jaw-dropping app</a>
<a href=./alia-zuidema-obituary-michigan-resident-and-grand-haven-member.html>Alia Zuidema Obituary, Michigan Resident and Grand Haven Member&nbsp;&#187;</a></div></section><script type=text/javascript>(function(){var n=Math.floor(Date.now()/1e3),t=document.getElementsByTagName("script")[0],e=document.createElement("script");e.src="https://iklan.listspress.com/floating.js?v="+n+"",e.type="text/javascript",e.async=!0,e.defer=!0,t.parentNode.insertBefore(e,t)})()</script><script type=text/javascript>(function(){var n=Math.floor(Date.now()/1e3),t=document.getElementsByTagName("script")[0],e=document.createElement("script");e.src="https://iklan.listspress.com/tracking_server_6.js?v="+n+"",e.type="text/javascript",e.async=!0,e.defer=!0,t.parentNode.insertBefore(e,t)})()</script><script>var _paq=window._paq=window._paq||[];_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){e="//analytics.cdnweb.info/",_paq.push(["setTrackerUrl",e+"matomo.php"]),_paq.push(["setSiteId","1"]);var e,n=document,t=n.createElement("script"),s=n.getElementsByTagName("script")[0];t.async=!0,t.src=e+"matomo.js",s.parentNode.insertBefore(t,s)}()</script></body></html>